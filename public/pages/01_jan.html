<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../style.css" />
    <script src="../core/PageHandler.js"></script>
    <script src="../core/VideoHandler.js"></script>
  </head>

  <body>
    <video playsinline preload="metadata" autoplay muted loop class="bg-media">
      <source
        src="../assets/01jan/bg_desktop.mp4"
        type="video/mp4"
        media="(min-width: 1024px)"
      />
      <source src="../assets/01jan/bg_mobile.mp4" type="video/mp4" />
      Your browser does not support HTML5 video.
    </video>

    <div class="container-center">
      <!-- Title -->
      <div id="container-title" class="container-title">
        <div class="text text-title">January</div>
        <div class="text text-subtitle">
          New Year Celebrations to start off ðŸŽ†ðŸŽ‰ðŸŽŠ
        </div>
      </div>

      <!-- Content -->
      <div class="container-content">
        <div
          id="container-content-title"
          class="text text-title container-content-title"
        >
          January
        </div>
        <table class="table-media">
          <tr>
            <!-- Item 01 -->
            <td class="cell-media">
              <div
                id="container-item-1"
                class="container-media container-media-horizontal"
              >
                <div class="text-subtitle">01/01 Leaving KLCC</div>
                <video
                  id="video-item-1"
                  class="media media-horizontal"
                  playsinline
                  preload="metadata"
                >
                  <source src="../assets/01jan/vid01.mp4" type="video/mp4" />
                </video>
                <button id="btn-item-1" class="btn-lockscreen">Play</button>
              </div>
            </td>

            <!-- Item 02 -->
            <td class="cell-media">
              <div
                id="container-item-2"
                class="container-media container-media-vertical"
              >
                <div class="text-subtitle">01/01 KLCC Countdown</div>
                <video
                  id="video-item-2"
                  class="media media-vertical"
                  playsinline
                  preload="metadata"
                >
                  <source
                    src="../assets/01jan/countdown.mp4"
                    type="video/mp4"
                  />
                </video>
                <button id="btn-item-2" class="btn-lockscreen">Play</button>
              </div>
            </td>

            <!-- Item 03 -->
            <td class="cell-media">
              <div
                id="container-item-3"
                class="container-media container-media-vertical"
              >
                <div class="text-subtitle">14/01 Mirror Selfies</div>
                <img
                  class="media media-vertical"
                  src="../assets/01jan/mirror.gif"
                />
              </div>
            </td>
          </tr>
        </table>
      </div>

      <!-- Navigation -->
      <div class="container-navigation">
        <button class="btn-nav btn-back" onclick="updatePage('back')">
          <span class="arrow-icon">â€¹</span>
        </button>

        <button class="btn-nav btn-next" onclick="updatePage('next')">
          <span class="arrow-icon">â€º</span>
        </button>
      </div>
    </div>
  </body>
</html>

<script>
  document.addEventListener("DOMContentLoaded", () => {
    setCurrentPage();
    const containerTitle = document.getElementById("container-title");
    const containers = [
      document.getElementById("container-content-title"),
      document.getElementById("container-item-2"),
      document.getElementById("container-item-1"),
      document.getElementById("container-item-3"),
    ];

    setTimeout(() => {
      containerTitle.style.transition = "opacity 0.8s ease";
      containerTitle.style.opacity = "0";
      containers.forEach((container) => {
        if (!container) return;
        container.style.opacity = "0";
        container.style.display = "flex";
      });

      setTimeout(() => {
        containers.forEach((container) => {
          if (!container) return;
          container.style.transition = "opacity 1.2s ease";
          container.style.opacity = "1";
        });
      }, 50);
      setTimeout(() => {
        containerTitle.style.display = "none";
      }, 800);
    }, 1500);

    // Video Handler
    {
      const videoPlayers = [
        {
          container: containers[0],
          btn: document.getElementById("btn-item-2"),
          video: document.getElementById("video-item-2"),
          volume: 0.5,
          fadeTime: 1000,
        },
        {
          container: containers[1],
          btn: document.getElementById("btn-item-1"),
          video: document.getElementById("video-item-1"),
          volume: 0.5,
          fadeTime: 1000,
        },
      ];
      videoPlayers.forEach(({ container, btn, video, volume, fadeTime }) => {
        if (!btn || !video) return;

        btn.addEventListener("click", () => {
          btn.style.display = "none";
          video.muted = false;
          video.play();
          fadeInAudio(video, volume, fadeTime);
        });
      });
    }
  });
</script>
